#!/usr/bin/env node
let cli = require("../lib/cli")
let argv = require("../lib/argv")


if (process.stdin) {

    process.stdin.setEncoding('utf8')
    process.stdin.resume()
    let content = ''
    process.stdin.on('data', (buf) => {
        console.log(buf.toString())
        content = buf.toString()
    })

    setTimeout(() => {
        console.log("out", content)
        if (!argv._.length) {
            // 默认mnemonic
            argv.mnemonic = (content || argv.mnemonic || '').trim()

            if (argv.base58 != undefined) {

                argv.base58 = (content || argv.base58 || '').trim()
                argv.mnemonic = ""
            }

            if (argv.seed != undefined) {
                argv.seed = (content || argv.seed || '').trim()
                argv.mnemonic = ""
            }
            console.log(argv)
            cli.generateAddress(argv)
        }
        process.exit(0)

    }, 100)
} else {
    console.warn("process.stdin null")
    cli.generateAddress(argv)
}